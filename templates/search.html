<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
  </script>
  <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
  </script>
  <script>
    // Add the subdomain to the path. https://www.goatcounter.com/help/domains
    window.goatcounter = {
      path: function (p) {return location.host + p}
    };
  </script>
  <script id="search_algo" type="module">
    import Fuse from 'https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.esm.js';

    window.index = {{ index|tojson }};

    const options = {
      includeScore: true,
      keys: ['title', 'contents'],
    };
    const fuse = new Fuse(window.index, options);
    const searchBox = document.querySelector("#search");
    const resultsList = document.querySelector("#results");
    searchBox.addEventListener("input", evt => {
      const result = fuse.search(evt.target.value);
      resultsList.innerHTML = '';
      for (let i=0; i < Math.min(25, result.length); i++) {
        const li = document.createElement("li");
        const cont = document.createTextNode(result[i].item.title);
        li.appendChild(cont);
        resultsList.appendChild(li);
      }
      console.log(result);
    });
  </script>
  <!-- visitor counter that does not track personal info -->
  <script data-goatcounter="https://goatcounter.billmill.org/count" async
    src="//goatcounter.billmill.org/count.js"></script>
  <link rel="stylesheet" href="/style.css" type="text/css" />
  <link rel="stylesheet" href="/pygments.css" type="text/css" />
  <link rel="alternate" type="application/atom+xml" title="Atom" href="/atom.xml">
  <title>llimllib notes search</title>
</head>

<body>
  <main class="container">
    <input id="search">
    <div>
      <ul id="results">
      </ul>
    </div>
  </main>
  {% include 'footer.html' %}
</body>

</html>
